[스토어드 함수와 커서]
#스토어드 함수 이해하기
1. 함수 생성 권한 부여
SET GLOBAL LOG_BIN_TRUST_FUNCTION_CREATORS = 1;

2. 스토어드 함수 생성
USE DOITSQL;
DROP FUNCTION IF EXISTS USER_SUM;

DELIMITER $$
CREATE FUNCTION USER_SUM(NUM_1 INT, NUM_2 INT)
  RETURNS INT
BEGIN
  RETURN NUM_1 + NUM_2;
END $$
DELIMITER;

#스토어드 함수 사용하기
SELECT USER_SUM (1, 5);

#스토어드 함수 내용 확인 및 삭제하기
1. 스토어드 함수 내용 확인
SHOW CREATE FUNCTION USER_SUM;

2. 스토어드함수 삭제
DROP FUNCTION USER_SUM;

#커서 알아두기


[트리거]
#트리거의 종류
- 행 트리거
- 문장 트리거

#트리거 실행 시기

#트리거 실행하기
1. 테이블 생성
USE DOITSQL;

CREATE TABLE TBL_TRIGGER_1 (
COL_1 INT,
COL_2 VARCHAR(50)
);

CREATE TABLE TBL_TRIGGER_2 (
COL_1 INT,
COL_2 VARCHAR(50)
);

INSERT INTO TBL_TRIGGER_1 VALUES (1, '데이터 1 입력');
SELECT * FROM TBL_TRIGGER_1;

2. UPDATE 발생 시 동작하는 트리거 생성
DELIMITER $$

CREATE TRIGGER DOT_UPDATE_TRIGGER
ALTER UPDATE
ON TBL_TRIGGER_1
FRO EACH SHOW

BEGIN
  INSERT INTO TBL_TRIGGER_2 VALUES (OLD.COL1, OLD.COL_2);

END $$
DELIMITER;

#트리거 생성
SET SQL_SAFE_UPDATE = 0;
UPDATE TBL_TRIGGER_1 SET COL_1 = 2, COL_2 = '1을 2로 수정';

SELECT * FROM TBL_TRIGGER_2;
SELECT * FROM TBL_TRIGGER_1;
