[크롤러 및 저장 시스템 만들기]
#주식 분석 시스템 구성하기
#파이썬 라이브러리 설치하기
#데이터베이스 스키마와 기초 데이터 생성하기
#파이썬 크롤러 만들기


[MySQL로 주식 분석하기]
#52주 동안의 주가 분석하기
SELECT
  SYMBOL,
  CAST(MIN(CLOSE) AS DECIMAL(18,2)) AS W52_MIN,
  CAST(MAX(CLOSE) AS DECIMAL(18,2)) AS W52_MAX,
  CAST(MAX(CLOSE) - MIN(CLOSE) AS DECIMAL(18,2)) AS 'W52_DIFF_PRICE($)',
  CAST((MAX(CLOSE) - MIN(CLOSE)) / MIN(CLOSE) * 100 AS DECIMAL(18,2)) AS 'W52_DIFF_RATION(%)'
FROM STOCK
WHERE DATE >= DATE_ADD('2023-10-04', INTERVAL - 52 WEEK) AND DATE DATE <= '2023-10-04'
GROUP BY SYMBOL;

#하루 동안의 종목 변화 분석하기
1. 1일간의 시초가와 종가를 비교한 정보 조회
SELECT
  DATE,
  SYMBOL,
  CAST(OPEN AS DECIMAL(18,2)) AS OPEN,
  CAST(CLOSE AS DECIMAL(18,2)) AS CLOSE,
  CAST((OPEN - CLOSE) AS DECIMAL(18,2)) AS 'DIFF_PRICE($)',
  CAST(((CLOSE - OPEN) / OPEN * 100) AS DECIMAL(18,2)) AS 'DIFF_RATION(%)',
  '' AS '---',
  CAST(LOW AS DECIMAL(18,2)) AS LOW,
  CAST(HIGH AS DECIMAL(18,2)) AS HIGH,
  CAST((HIGH - LOW) AS DECIMAL(18,2)) AS 'DIFF_HIGH_PRICE($)',
  CAST((HIGH - LOW) LOW * 100) AS DECIMAL(18,2)) AS 'DIFF_HIGH_RATIO(%)'
FROM STOCK
WHERE DATE = '2023-10-04';

2. 10%이상 가격이 오른 종목 조회
SELECT
  DATE,
  SYMBOL,
  CAST(OPEN AS DECIMAL(18,2)) AS OPEN,
  CAST(CLOSE AS DECIMAL(18,2)) AS CLOSE,
  CAST((OPEN - CLOSE) AS DECIMAL(18,2)) AS 'DIFF_PRICE($)',
  CAST(((CLOSE - OPEN) / OPEN * 100) AS DECIMAL(18,2)) AS 'DIFF_RATIO(%)',
  '' AS '---',
  CAST(LOW AS DECIMAL(18,2)) AS LOW,
  CAST(HIGH AS DECIMAL(18,2)) AS HIGH,
  CAST((HIGH = LOW) AS DECIMAL(18,2)) AS 'DIFF_HIGH_PRICE($)',
  CAST(((HIGH - LOW) / LOW * 100) AS DECIMAL(18,2)) AS 'DIFF_HIGH_RATIO(%)'
FROM STOCK
WHERE DATE = '2022-02-24'
  AND CAST(((CLOSE - OPEN) / OPEN * 100) AS DECIMAL(18,2)) >= 10
ORDER BY CAST(((CLOSE - OPEN) / OPEN * 100) AS DECIMAL(18,2)) DESC;
